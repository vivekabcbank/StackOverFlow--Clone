{% extends 'profile/base.html' %}
{% block content %}
{% load qa_tags %}

<!DOCTYPE html>


    <html class="html__responsive ">

    <head>
        <title>Users - Stack Overflow</title>
        <link rel="stylesheet" type="text/css" href="https://cdn.sstatic.net/Sites/stackoverflow/primary.css?v=34c234f84be8">
        <link rel="stylesheet" type="text/css" href="https://cdn.sstatic.net/Sites/stackoverflow/secondary.css?v=bbf1061b903d">
    </head>


    <body class="users-page unified-theme">
    <div id="notify-container"></div>
    <div id="custom-header"></div>
   
    <div class="container">
            


{% include 'profile/left_sidebar.html' %}





        <div id="content" class="snippet-hidden">

            <div id="mainbar-full">

        <h1 class="fs-headline1 mb24">
            Users
        </h1>

<div class="d-flex fw-wrap ai-stretch md:d-block">
    <div class="flex--item mb12 ps-relative">
        <input name="w" id="id_search_user" class="s-input s-input__search h100 wmx3" autocomplete="off" type="text" placeholder="Filter by user">
        <svg aria-hidden="true" class="s-input-icon s-input-icon__search svg-icon iconSearch" width="18" height="18" viewBox="0 0 18 18"><path d="m18 16.5-5.14-5.18h-.35a7 7 0 10-1.19 1.19v.35L16.5 18l1.5-1.5ZM12 7A5 5 0 112 7a5 5 0 0110 0Z"/></svg>
    </div>

</div>


<div id="user_browser">
        <div class="d-grid grid__4 lg:grid__3 md:grid__2 sm:grid__1 g12">
            {% for user in users %}
                <div class="grid--item user-info  user-hover">
                    <div class="user-gravatar48">
                        <a href="{% url 'profile:activityPageTabProfile' user.id user.username %}"><div class="gravatar-wrapper-48"><img src="{% if user.profile.profile_photo %}{{user.profile.profile_photo.url}}{% endif %}" alt="" width="48" height="48" class="bar-sm"></div></a>
                    </div>
                    <div class="user-details">
                        <a href="{% url 'profile:activityPageTabProfile' user.id user.username %}">{{user.username}}</a>
                        <span class="user-location">{{user.profile.location}}
                        </span>
                        <div class="-flair">
                            <span class="reputation-score" title="reputation this week: {{user|calculate_reputation}} total reputation: 65,129" dir="ltr">{{user|calculate_reputation}}</span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
</div>



<script>
            var token = '{{csrf_token}}';
            $('#id_search_user').on('input', function (e) {
                $('#user_browser').html(`<div class="spinner-border text-warning" role="status">
                                        <span class="sr-only">Loading...</span>
                                        </div>`)
                $.ajax({
                    headers: { "X-CSRFToken": token },
                    url: "{% url 'profile:Ajax_searchUser' %}",
                    data: {
                        'w': $('#id_search_user').val(),
                    },
                    method: 'get',
                    dataType: 'json',
                    success: function (response) {
                            $("#user_browser > *").remove();

                        for (result of response.results) {
                            $("#user_browser").prepend(`<div id="user_browser" class="d-grid grid__4 lg:grid__3 md:grid__2 sm:grid__1 g12"> ${response.results.map(({user_name}) => `<div class="grid--item user-info  user-hover">
                    <div class="user-gravatar48">
                        <a href="/activityPageTabProfile/${result.id}/${result.user_name}/"><div class="gravatar-wrapper-48"><img src="${result.photo}" alt="" width="48" height="48" class="bar-sm"></div></a>
                    </div>
                    <div class="user-details">
                        <a href="/activityPageTabProfile/${result.id}/${result.user_name}/">${user_name}</a>
                        <span class="user-location">${user_name}
                        </span>
                    </div>
                </div>` ).join("")} </div>`)

                        }
                    }
                })
            })
</script>



</div>

        </div>
    </div>


            {% include "profile/footer.html" %}

        
    <div id="onetrust-consent-sdk" class="d-none"></div>
    <div id="onetrust-banner-sdk" data-controller="s-modal"></div>
    <div id="ot-pc-content" class="d-none"></div>
    <div id="onetrust-style" class="d-none">&nbsp;</div>
    <div class="d-none js-consent-banner-version" data-consent-banner-version="baseline"></div>

    
    </body>
    </html>



{% endblock content %}

